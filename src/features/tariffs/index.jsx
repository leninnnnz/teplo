import { useState, useMemo } from 'react';
import style from './index.module.scss';
import {Content, TitlePage, Wrapper} from '../../shared/UI';

// Данные о тарифах
const tariffs = [
    {
        name: 'Тариф на услуги горячего водоснабжения на период с 01.07.2015 по 31.12.2015установлен Постановлением Правительства Свердловской области №82-ПК от 01.07.2015 г.',
        category: 'Горячее водоснабжение',
        year: '2015',
        file: '#',
    },
    {
        name: 'Тариф на услуги по передаче тепловой энергии на период с  01.07.2015 по 31.12.2015 установлен Постановлением Правительства Свердловской области №80-ПК от 01.07.2015',
        category: 'Передача тепловой энергии',
        year: '2015',
        file: '#',
    },
    {
        name: 'Тариф на услуги по передаче тепловой энергии на период с 30.10.2015 по 31.12.2015 установлен Постановлением Правительства Свердловской области №145-ПК от 30.10.2015 г.',
        category: 'Передача тепловой энергии',
        year: '2015',
        file: '#',
    },
    {
        name: 'Тариф на услуги горячего водоснабжения на 2016 год установлен Постановлением Правительства Свердловской области №205-ПК от 10.12.2015 г.',
        category: 'Горячее водоснабжение',
        year: '2016',
        file: '#',
    },
    {
        name: 'Тариф на услуги по передаче тепловой энергии на 2016 год установлен Постановлением Правительства Свердловской области №195-ПК от 10.12.2015 г.',
        category: 'Передача тепловой энергии',
        year: '2016',
        file: '#',
    },
    {
        name: 'Тариф на услуги по транспортировке ХВ и СТОКОВ на 2017г. установлен Постановлением Правительства Свердловской области №173-ПК от 13.12.2016 г.',
        category: 'Транспортировка воды и стоков',
        year: '2017',
        file: '#',
    },
    {
        name: 'Тариф на услуги по передаче тепловой энергии на 2017-2019 годы установлен Постановлением Правительства Свердловской области №245-ПК от 26.12.2016 г.',
        category: 'Передача тепловой энергии',
        year: '2017',
        file: '#',
    },
    { name: 'Долгосрочные параметры для тарифов на ГВС 246-ПК_от_26.12.2016_', category: 'Горячее водоснабжение', year: '2017', file: '#' },
    {
        name: 'Долгосрочные параметры для тарифов на передачу тепловой энергии  246-ПК_от_26.12.2016.',
        category: 'Передача тепловой энергии',
        year: '2017',
        file: '#',
    },
    {
        name: 'Тариф на услуги по горячему водоснабжению на 2017-2036 годы установлен Постановлением Правительства Свердловской области №247-ПК от 26.12.2016 г.',
        category: 'Горячее водоснабжение',
        year: ['2017', '2018', '2019', '2020', '2021', '2022', '2023', '2024', '2025'],
        file: '#',
    },
    {
        name: 'Плата за подключение к системам теплоснабжения на 2017г. установлена Постановлением Правительства Свердловской области №185-ПК от 13.12.2017 г.',
        category: 'Плата за подключение',
        year: '2017',
        file: '#',
    },
    {
        name: 'Плата за подключение к системам теплоснабжения на 2018 год. установлена Постановлением Правительства №_174 от 11.12.2017 года.',
        category: 'Плата за подключение',
        year: '2018',
        file: '#',
    },
    {
        name: 'Тариф на услуги горячего водоснабжения на 2018 год установлен Постановлением Правительства №172-ПК от 11.12.2017 г.',
        category: 'Горячее водоснабжение',
        year: '2018',
        file: '#',
    },
    {
        name: 'Тариф на услуги по передаче тепловой энергии на 2018 год установлен Постановлением Правительства №137-ПК от 11.12.2017 г.',
        category: 'Передача тепловой энергии',
        year: '2018',
        file: '#',
    },
    {
        name: 'Тариф на услуги по транспортировке воды и стоков на 2018 год  161-ПК от 11.12.2017 г.',
        category: 'Транспортировка воды и стоков',
        year: '2018',
        file: '#',
    },
    {
        name: 'Тариф на тепловую энергию на коллекторах источника тепловой энергии установлен Постановлением Правительства № 130-ПК от 05.09.2018',
        category: 'Теплоноситель',
        year: '2018',
        file: '#',
    },
    {
        name: 'Плата за подключение к системам теплоснабжения на 2019 год. установлена Постановлением Правительства №289 от 11.12.2018 г.',
        category: 'Плата за подключение',
        year: '2019',
        file: '#',
    },
    {
        name: 'Тариф на тепловую энергию,услуги по передаче тепловой энергии на 2019 год установлен Постановлением Правительства ПП №276-ПК от 11.12.2018',
        category: 'Передача тепловой энергии',
        year: '2019',
        file: '#',
    },
    {
        name: 'Тариф на теплоноситель на 2019 год установлен Постановлением Правительства №284-ПК от 11.12.2018.',
        category: 'Теплоноситель',
        year: '2019',
        file: '#',
    },
    {
        name: 'Тариф на услуги по транспортировке воды и стоков на 2019 год установлен Постановлением Правительства №282-ПК от 11.12.2018.',
        category: 'Транспортировка воды и стоков',
        year: '2019',
        file: '#',
    },
    {
        name: 'Тариф на услуги горячего водоснабжения на 2019 год установлен Постановлением Правительства ПП №300-ПК от 19.11.2018.',
        category: 'Горячее водоснабжение',
        year: '2019',
        file: '#',
    },
    {
        name: 'Тариф на услуги горячего водоснабжения на 2019 год установлен Постановлением Правительства №137-ПК от 20.11.2019 ГВС п. Первомайский на 2019.',
        category: 'Горячее водоснабжение',
        year: '2019',
        file: '#',
    },
    {
        name: 'Тариф на передачу и производство тепловой энергии на 2020 год установлен ПП № 228-ПК  от 11.12.2019.',
        category: 'Передача тепловой энергии',
        year: '2020',
        file: '#',
    },
    {
        name: 'Тариф на услуги горячего водоснабжения  п. Первомайский 2020 год установлен Постановлением  Правительства № 248-ПК от 18.12.2019.',
        category: 'Горячее водоснабжение',
        year: '2020',
        file: '#',
    },
    {
        name: 'Тариф на услуги горячего водоснабжения  от Синарской ТЭЦ, РУСАЛ-Урал на 2020 год установлен Постановлением  Правительства №250-ПК от 18.12.2019 .',
        category: 'Горячее водоснабжение',
        year: '2020',
        file: '#',
    },
    {
        name: 'Плата за подключение к системам теплоснабжения на 2020 год установлена Постановлением  Правительства №252-ПК от 18.12.2019 от 0,1 до 1,5 Гкал-час.',
        category: 'Плата за подключение',
        year: '2020',
        file: '#',
    },
    {
        name: 'Постановление Правительства №253-ПК от 18.12.2019 плата за подключение до 0,1 Гкал-час.',
        category: 'Плата за подключение',
        year: '2020',
        file: '#',
    },
    {
        name: 'Тариф на услуги по транспортировке воды и стоков на 2020 год  237-ПК от 11.12.2019г.',
        category: 'Транспортировка воды и стоков',
        year: '2020',
        file: '#',
    },
    {
        name: 'Тариф на услуги по транспортировке воды и стоков на 2021г. Постановление правительства №140-ПК от 25.11.2020',
        category: 'Транспортировка воды и стоков',
        year: '2021',
        file: '#',
    },
    {
        name: 'Тариф на услуги горячего водоснабжения в закрытых системах на 2021г. Постановление правительства №246-ПК от 16.12.2020',
        category: 'Горячее водоснабжение',
        year: '2021',
        file: '#',
    },
    {
        name: 'Тариф на передачу и производство тепловой энергии на 2021г. Постановление правительства №237-ПК_от 16.12.2020',
        category: 'Передача тепловой энергии',
        year: '2021',
        file: '#',
    },
    {
        name: 'Тариф на теплоноситель на 2021г. Постановление правительства №227-ПК_09.12.2020',
        category: 'Теплоноситель',
        year: '2021',
        file: '#',
    },
    {
        name: 'Тариф на услуги по транспортировке воды и стоков на 2022г. Постановление правительства №211-ПК_09.12.2021г.',
        category: 'Транспортировка воды и стоков',
        year: '2022',
        file: '#',
    },
    {
        name: 'Тариф на теплоноситель на 2022г. Постановление правительства №214-ПК_09.12.2021г.',
        category: 'Теплоноситель',
        year: '2022',
        file: '#',
    },
    {
        name: 'Тариф на передачу и производство тепловой энергии на 2022г. Постановление правительства №203-ПК_от 09.12.2021г.',
        category: 'Передача тепловой энергии',
        year: '2022',
        file: '#',
    },
    {
        name: 'Тариф на производство тепловой энергии, произведенной котельной по улице Войкова, 8 на 2022г. Постановление правительства №204-ПК_от 09.12.2021г.',
        category: 'Передача тепловой энергии',
        year: '2022',
        file: '#',
    },
    {
        name: 'Плата за подключение к системам теплоснабжения на 2022г. Постановление правительства №226-ПК_от 16.12.2021г.',
        category: 'Плата за подключение',
        year: '2022',
        file: '#',
    },
    {
        name: 'Тариф на услуги горячего водоснабжения в закрытых системах на 2022г. Постановление правительства №236-ПК от 16.12.2021г.',
        category: 'Горячее водоснабжение',
        year: '2022',
        file: '#',
    },
    {
        name: 'Тариф на услуги по транспортировке воды и стоков c 01.12.2022г. по 31.12.2023г. Постановление правительства №207-ПК от 15.11.2022 г.',
        category: 'Транспортировка воды и стоков',
        year: ['2022', '2023'],
        file: '#',
    },
    {
        name: 'Тариф на передачу и производство тепловой энергии c 01.12.2022г. по 31.12.2023г. Постановление правительства № 199-ПК от 15.11.2022 г.',
        category: 'Передача тепловой энергии',
        year: ['2022', '2023'],
        file: '#',
    },
    {
        name: 'Тариф на услуги горячего водоснабжения в закрытых системах c 01.12.2022г. по 31.12.2023г. Постановление правительства №217-ПК от 17.11.2022г.',
        category: 'Горячее водоснабжение',
        year: ['2022', '2023'],
        file: '#',
    },
    {
        name: 'ариф на теплоноситель c 01.12.2022г. по 31.12.2023г. Постановление правительства №210-ПК от 15.11.2022г.',
        category: 'Теплоноситель',
        year: ['2022', '2023'],
        file: '#',
    },
    {
        name: 'Плата за подключение к системам теплоснабжения на 2023г. Постановление правительства №249-ПК от 15.12.2022г.',
        category: 'Плата за подключение',
        year: '2023',
        file: '#',
    },
    {
        name: 'Тариф на передачу и производство тепловой энергии на 2024 г. Постановление правительства №208-ПК от 06.12.2023 г.',
        category: 'Передача тепловой энергии',
        year: '2024',
        file: '#',
    },
    {
        name: 'Тариф на теплоноситель на 2024 г. Постановление правительства №219-ПК от 06.12.2023г.',
        category: 'Теплоноситель',
        year: '2024',
        file: '#',
    },
    {
        name: 'Тариф на услуги горячего водоснабжения в закрытых системах на 2024 г. Постановление правительства №235-ПК от 13.12.2023 г.',
        category: 'Горячее водоснабжение',
        year: '2024',
        file: '#',
    },
    {
        name: 'Тариф на услуги по транспортировке воды и стоков на 2024 г. Постановление правительства №167-ПК от 28.11.2023 г.',
        category: 'Транспортировка воды и стоков',
        year: '2024',
        file: '#',
    },
    {
        name: 'Плата за подключение к системам теплоснабжения на 2024 г. Постановление правительства №246-ПК от 18.12.2023г.',
        category: 'Плата за подключение',
        year: '2024',
        file: '#',
    },
    {
        name: 'Тариф на передачу и производство тепловой энергии на 2025 г. Постановление правительства №224-ПК от 17.12.2024 г.',
        category: 'Передача тепловой энергии',
        year: '2025',
        file: '#',
    },
    {
        name: 'Тариф на теплоноситель котельная ул. Войкова, д.8 на 2025 г. Постановление правительства №180-ПК от 12.12.2024 г.',
        category: 'Теплоноситель',
        year: '2025',
        file: '#',
    },
    {
        name: 'Тариф на теплоноситель котельные кроме ул. Войкова, д.8 на 2025 г. Постановление правительства № 183-ПК от 12.12.2024 г.',
        category: 'Теплоноситель',
        year: '2025',
        file: '#',
    },
    {
        name: 'Тарифы на услуги горячего водоснабжения в закрытых системах Синарского и Красногорского районов на 2025 г. Постановление правительства № 241-ПК от 17.12.2024 г.',
        category: 'Горячее водоснабжение',
        year: '2025',
        file: '#',
    },
    {
        name: 'Тариф на услуги горячего водоснабжения в закрытой системе котельной пос. Первомайский на 2025 г. Постановление правительства № 239-ПК от 17.12.2024 г.',
        category: 'Горячее водоснабжение',
        year: '2025',
        file: '#',
    },
    {
        name: 'Тарифы на услуги по транспортировке воды и стоков на 2025 г. Постановление правительства №103-ПК от 07.11.2024 г.',
        category: 'Транспортировка воды и стоков',
        year: '2025',
        file: '#',
    },
    {
        name: 'Плата за подключение к системам теплоснабжения на 2025 г. Постановление правительства №248-ПК от 20.12.2024 г.',
        category: 'Плата за подключение',
        year: '2025',
        file: '#',
    },
];

// Функция определения категории

// Компонент с информацией о тарифах
export function TariffsInformation() {
    const [search, setSearch] = useState('');
    const [selectedYear, setSelectedYear] = useState('');
    const [selectedCategory, setSelectedCategory] = useState('');

    // Получаем список всех лет из тарифов
    const years = useMemo(() => {
        const uniqueYears = new Set();
        tariffs.forEach((tariff) => {
            if (Array.isArray(tariff.year)) {
                tariff.year.forEach((y) => uniqueYears.add(y));
            } else {
                uniqueYears.add(tariff.year);
            }
        });
        return Array.from(uniqueYears).sort();
    }, [tariffs]);

    // Получаем список всех категорий
    const categories = useMemo(() => {
        return Array.from(new Set(tariffs.map((tariff) => tariff.category)));
    }, [tariffs]);

    // Фильтрация тарифов
    const filteredTariffs = tariffs.filter((tariff) => {
        const matchesSearch = tariff.name.toLowerCase().includes(search.toLowerCase());
        const matchesYear = selectedYear
            ? Array.isArray(tariff.year)
                ? tariff.year.includes(selectedYear)
                : tariff.year === selectedYear
            : true;
        const matchesCategory = selectedCategory ? tariff.category === selectedCategory : true;
        return matchesSearch && matchesYear && matchesCategory;
    });

    return (
        <Wrapper>
            <TitlePage title={'Тарифы'} />
            <Content>
                {/* Поле поиска */}
                <div className={style.searchWrapper}>
                    <input
                        type="text"
                        placeholder="Поиск по названию..."
                        value={search}
                        onChange={(e) => setSearch(e.target.value)}
                        className={style.searchInput}
                    />
                </div>

                {/* Фильтры */}
                <div className={style.filters}>
                    <div className={style.selectWrapper}>
                        <select value={selectedYear} onChange={(e) => setSelectedYear(e.target.value)} className={style.select}>
                            <option value="">Все года</option>
                            {years.map((year) => (
                                <option key={year} value={year}>
                                    {year}
                                </option>
                            ))}
                        </select>
                    </div>

                    <div className={style.selectWrapper}>
                        <select value={selectedCategory} onChange={(e) => setSelectedCategory(e.target.value)} className={style.select}>
                            <option value="">Все категории</option>
                            {categories.map((category) => (
                                <option key={category} value={category}>
                                    {category}
                                </option>
                            ))}
                        </select>
                    </div>
                </div>

                {/* Список тарифов */}
                <ul>
                    {filteredTariffs.length > 0 ? (
                        filteredTariffs.map((tariff, index) => (
                            <li key={index} className={style.tariffItem}>
                                <p className={style.tariffLink}>{tariff.name}</p>
                            </li>
                        ))
                    ) : (
                        <p className={style.noResults}>Ничего не найдено</p>
                    )}
                </ul>
            </Content>
        </Wrapper>
    );
}
